/*======= TAILWIND IMPORTS =======*/
@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

@theme {
  --height-header: var(--header-height);

  --background-image-gradient-radial: radial-gradient(var(--tw-gradient-stops));
  --background-image-gradient-conic: conic-gradient(
    from 180deg at 50% 50%,
    var(--tw-gradient-stops)
  );

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background-primary: hsl(var(--background-primary));
  --color-background-secondary: hsl(var(--background-secondary));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-active: hsl(var(--active));
  --color-active-foreground: hsl(var(--active-foreground));

  --color-hover: hsl(var(--hover));
  --color-hover-foreground: hsl(var(--hover-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-warning: hsl(var(--warning));
  --color-warning-foreground: hsl(var(--warning-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-hover: hsl(var(--destructive-hover));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border-light: hsl(var(--border-light));
  --color-border-dark: hsl(var(--border-dark));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --animate-scroll-x: scroll 40s linear infinite;
  --animate-scroll-left: scroll-left 60s linear infinite;
  --animate-scroll-right: scroll-right 60s linear infinite;
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes scroll {
    0% {
      transform: translateX(-33.33%);
    }
    100% {
      transform: translateX(-66.8%);
    }
  }

  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @keyframes scroll-right {
    0% {
      transform: translateX(-50%);
    }
    100% {
      transform: translateX(0);
    }
  }

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*======= BASE =======*/
@layer base {
  :root {
    /*------- COLOR PALETTE -------*/
    /* Base Colors */
    --color-black: hsl(225, 22%, 7%); /* #0e1016 */
    --color-grey-200: hsl(0, 0%, 20%); /* #333333 */
    --color-grey-400: hsl(222, 12%, 67%); /* #a1a7b5 */
    --color-grey-500: hsl(214, 30%, 91%); /* #e1e7ef */
    --color-grey-600: hsl(210, 12%, 93%); /* #eceef0 */
    --color-grey-800: hsl(220, 14%, 96%); /* #f3f4f6 */
    --color-grey-900: hsl(0, 0%, 98%); /* #f9f9f9 */
    --color-white: hsl(0, 0%, 100%); /* #ffffff */

    --color-blue-primary-200: hsl(217, 65%, 25%); /* #163567 */
    --color-blue-primary-500: hsl(217, 76%, 51%); /* #236ce1 */
    --color-blue-secondary-500: hsl(200, 100%, 88%); /* #c2ebff */
    --color-amber-100: hsl(48, 97%, 89%); /* #fef3c6 */
    --color-amber-200: hsl(48, 98%, 76%); /* #fee685 */
    --color-amber-500: hsl(36, 99%, 53%); /* #fea111 */
    --color-amber-600: hsl(30, 100%, 44%); /* #e17100 */
    --color-amber-700: hsl(30, 82%, 23%); /* #6c3c0b */
    --color-amber-800: hsl(30, 100%, 20%); /* #973c00 */
    --color-red-200: hsl(0 70% 35%); /* #991919 */
    --color-red-500: hsl(0, 70%, 45%); /* #c12222 */

    --color-cyan: hsl(180, 100%, 50%); /* #00ffff */
    --color-green: hsl(120, 100%, 50%); /* #00ff00 */
    --color-yellow: hsl(60, 100%, 50%); /* #ffff00 */
    --color-red-bright: hsl(0, 100%, 50%); /* #ff0000 */

    /* Dark Mode Colors */
    --color-dark-grey-400: hsl(221, 34%, 16%); /* #1b2437 */
    --color-dark-grey-800: hsl(217 6% 54%); /* #838a92 */

    --color-blue-secondary-dark: hsl(200, 100%, 80%); /* #99ddff */

    --color-cyan-dark: hsl(180 70% 35%); /* #199999 */
    --color-green-dark: hsl(120 70% 35%); /* #199919 */
    --color-yellow-dark: hsl(60 70% 35%); /* #999919 */

    /*------- THEME VARIABLES -------*/
    /* Base colors */
    --background-primary: 0 0% 100%; /* --color-white */
    --background-secondary: 0 0% 100%; /* --color-white */ /* 0 0% 98%; /* --color-grey-900 */
    --foreground: 225 22% 7%; /* --color-black */

    /* Component colors */
    --card: 0 0% 100%; /* --color-white */
    --card-foreground: 225 22% 7%; /* --color-black */

    --popover: 0 0% 100%; /* --color-white */
    --popover-foreground: 225 22% 7%; /* --color-black */

    /* Primary colors */
    --primary: 217 76% 51%; /* --color-blue-primary-500 */
    --primary-foreground: 0 0% 100%; /* --color-white */

    /* Secondary colors */
    --secondary: 200 100% 88%; /* --color-blue-secondary-500 */
    --secondary-foreground: 217 76% 51%; /* --color-blue-primary-500 */

    /* UI states */
    --active: 210, 12%, 93%; /* --color-grey-600 */
    --active-foreground: 225 22% 7%; /* --color-black */

    --hover: 220 14% 96%; /* --color-grey-800 */
    --hover-foreground: 225 22% 7%; /* --color-black */

    --muted: 220 14% 96%; /* --color-grey-800 */
    --muted-foreground: 222 12% 67%; /* --color-grey-400 */

    --accent: 200 100% 88%; /* --color-blue-secondary-500 */
    --accent-foreground: 217 76% 51%; /* --color-blue-primary-500 */

    --warning: 48 97% 89%; /* --color-amber-100 */
    --warning-foreground: 30 100% 20%; /* --color-amber-800 */

    --destructive: 0 84% 60%; /* --color-red-500 */
    --destructive-hover: 0 70% 35%; /* --color-red-200 */
    --destructive-foreground: 0 0% 100%; /* --color-white */

    /* UI elements */
    --border-light: 214 30% 91%; /* --color-grey-500 */
    --input: 214 30% 91%; /* --color-grey-500 */
    --ring: 217 76% 51%; /* --color-blue-primary-500 */

    /* Chart colors */
    --chart-1: 217 76% 51%; /* --color-blue-primary-500 */
    --chart-2: 180 100% 50%; /* --color-cyan */
    --chart-3: 120 100% 50%; /* --color-green */
    --chart-4: 60 100% 50%; /* --color-yellow */
    --chart-5: 0 100% 50%; /* --color-red-bright */

    /* Border radius */
    --radius: 0.5rem;

    /* Header height */
    --header-height: calc(var(--spacing) * 16);
  }

  /* Dark mode */
  .dark {
    /* Base colors */
    --background-primary: 225 22% 7%; /* --color-black */
    --background-secondary: 225 22% 7%; /* --color-black */
    --foreground: 0 0% 98%; /* --color-grey-900 */

    /* Component colors */
    --card: 225 22% 7%; /* --color-black */
    --card-foreground: 0 0% 98%; /* --color-grey-900 */

    --popover: 225 22% 7%; /* --color-black */
    --popover-foreground: 0 0% 98%; /* --color-grey-900 */

    /* Secondary colors */
    --secondary: 200 100% 80%; /* --color-blue-secondary-dark */

    /* UI states */
    --hover: 210, 12%, 93%; /* --color-grey-600 */
    --hover-foreground: 225 22% 7%; /* --color-black */

    --muted: 221, 34%, 16%; /* --color-dark-grey-800 */
    --muted-foreground: 217 6% 54%; /* --color-dark-grey-400 */

    --accent: 217 65% 25%; /* --color-blue-primary-200 */
    --accent-foreground: 200 100% 88%; /* --color-blue-secondary-500 */

    --warning: 30 100% 20%; /* --color-amber-800 */
    --warning-foreground: 48 98% 76%; /* --color-amber-200 */

    /* UI elements */
    --border-dark: 0 0% 20%; /* --color-grey-200 */
    --input: 0 0% 20%; /* --color-grey-200 */

    /* Chart colors */
    --chart-1: 217 76% 51%; /* --color-blue-primary-500 */
    --chart-2: 180 70% 40%; /* --color-cyan-dark */
    --chart-3: 120 70% 40%; /* --color-green-dark */
    --chart-4: 60 70% 40%; /* --color-yellow-dark */
    --chart-5: 0 70% 40%; /* --color-red-dark */
  }

  /* Border special case */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    @apply border-border-light dark:border-border-dark;
  }

  /*------- GENERAL -------*/

  body {
    @apply bg-background-primary text-foreground text-sm;
  }

  /*------- BUTTONS -------*/
  /* Base button styles */
  .btn {
    @apply inline-flex items-center justify-center gap-x-2
    text-sm font-medium whitespace-nowrap 
    rounded-xs ring-offset-background-primary cursor-pointer
    transition-colors
    focus-visible:outline-hidden focus-visible:ring-2
    focus-visible:ring-ring focus-visible:ring-offset-2
    disabled:pointer-events-none disabled:opacity-50;

    /* Button variants */
    &.btn-primary {
      @apply bg-primary text-primary-foreground hover:bg-primary/80;
    }

    &.btn-secondary {
      @apply border border-primary-foreground bg-background-primary hover:bg-hover hover:text-hover-foreground;
    }

    &.btn-warning {
      @apply bg-warning text-warning-foreground hover:bg-warning/80;
    }

    &.btn-destructive {
      @apply bg-destructive text-destructive-foreground hover:bg-destructive-hover;
    }

    &.btn-outline {
      @apply border border border-input bg-background-primary hover:bg-hover hover:text-hover-foreground;
    }

    &.btn-ghost {
      @apply hover:bg-hover hover:text-hover-foreground;
    }

    &.btn-link {
      @apply text-primary underline-offset-4 hover:underline;
    }

    /* Button sizes */
    &.btn-size-default {
      @apply h-10 px-4 py-2;
    }

    &.btn-size-sm {
      @apply h-8 px-2;
    }

    &.btn-size-lg {
      @apply h-12 px-8 text-base;
    }

    &.btn-size-icon {
      @apply size-10;
    }
  }

  /*------- BLOG -------*/
  [data-rehype-pretty-code-fragment] {
    overflow: hidden;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
  }

  [data-rehype-pretty-code-fragment] pre {
    overflow-x: auto;
    padding: 1rem;
    border-radius: 0.5rem;
    border-width: 1px;
  }

  [data-rehype-pretty-code-title] {
    font-family: monospace;
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
    background-color: rgb(24 24 27 / 0.8);
    color: white;
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
  }

  html.light [data-rehype-pretty-code-title] {
    background-color: rgb(228 228 231 / 0.8);
    color: rgb(39 39 42);
  }

  [data-rehype-pretty-code-fragment] pre[data-language] {
    border-top-left-radius: 0;
  }

  .highlighted {
    background-color: rgb(50 50 60 / 0.6);
    border-left: 2px solid #60a5fa;
    padding-left: 0.5rem;
  }

  html.light .highlighted {
    background-color: rgb(224 231 255 / 0.6);
  }

  /* Blog prose overrides */
  .prose pre {
    background-color: rgb(24 24 27);
    color: rgb(244 244 245);
    border-color: rgb(39 39 42);
  }

  html.light .prose pre {
    background-color: rgb(244 244 245);
    color: rgb(39 39 42);
    border-color: rgb(228 228 231);
  }

  .prose code {
    background-color: rgb(39 39 42);
    color: rgb(244 244 245);
  }

  html.light .prose code {
    background-color: rgb(228 228 231);
    color: rgb(39 39 42);
  }

  /* Don't style inline code inside pre blocks twice */
  .prose pre code {
    background-color: transparent;
  }

  html.light .prose pre code {
    background-color: transparent;
  }

  /*======= TIPTAP EDITOR STYLES =======*/
  /* TipTap Editor Content */
  .ProseMirror {
    outline: none;
  }

  /* Code blocks with syntax highlighting */
  .ProseMirror pre {
    background: hsl(var(--muted));
    color: hsl(var(--foreground));
    font-family: "JetBrains Mono", "Fira Code", Consolas, "Courier New",
      monospace;
    padding: 0.75rem;
    border-radius: calc(var(--radius) - 2px);
    overflow-x: auto;
    border: 1px solid hsl(var(--border-light));
    position: relative;
  }

  .dark .ProseMirror pre {
    border-color: hsl(var(--border-dark));
  }

  .ProseMirror pre code {
    color: inherit;
    padding: 0;
    background: none;
    font-size: 0.875rem;
  }

  /* Language label for code blocks */
  .ProseMirror pre[data-language]::before {
    content: attr(data-language);
    position: absolute;
    top: 0.5rem;
    right: 0.75rem;
    font-size: 0.75rem;
    color: hsl(var(--muted-foreground));
    text-transform: uppercase;
    font-weight: 500;
    pointer-events: none;
  }

  /* Syntax highlighting colors */
  .ProseMirror .hljs-keyword,
  .ProseMirror .hljs-selector-tag,
  .ProseMirror .hljs-built_in {
    color: hsl(var(--primary));
  }

  .ProseMirror .hljs-string,
  .ProseMirror .hljs-attr {
    color: hsl(120, 70%, 45%);
  }

  .dark .ProseMirror .hljs-string,
  .dark .ProseMirror .hljs-attr {
    color: hsl(120, 70%, 60%);
  }

  .ProseMirror .hljs-number,
  .ProseMirror .hljs-literal {
    color: hsl(var(--warning));
  }

  .ProseMirror .hljs-comment {
    color: hsl(var(--muted-foreground));
    font-style: italic;
  }

  .ProseMirror .hljs-function,
  .ProseMirror .hljs-title {
    color: hsl(200, 70%, 50%);
  }

  .dark .ProseMirror .hljs-function,
  .dark .ProseMirror .hljs-title {
    color: hsl(200, 70%, 65%);
  }

  .ProseMirror .hljs-variable,
  .ProseMirror .hljs-name {
    color: hsl(var(--foreground));
  }

  .ProseMirror .hljs-tag {
    color: hsl(0, 70%, 50%);
  }

  .dark .ProseMirror .hljs-tag {
    color: hsl(0, 70%, 65%);
  }

  /* Tables */
  .ProseMirror table {
    border-collapse: collapse;
    table-layout: fixed;
    width: 100%;
    margin: 0;
    overflow: hidden;
    border: 1px solid hsl(var(--border-light));
    border-radius: calc(var(--radius) - 2px);
  }

  .dark .ProseMirror table {
    border-color: hsl(var(--border-dark));
  }

  .ProseMirror td,
  .ProseMirror th {
    min-width: 1em;
    border: 1px solid hsl(var(--border-light));
    padding: 8px 12px;
    vertical-align: top;
    box-sizing: border-box;
    position: relative;
  }

  .dark .ProseMirror td,
  .dark .ProseMirror th {
    border-color: hsl(var(--border-dark));
  }

  .ProseMirror th {
    font-weight: bold;
    text-align: left;
    background-color: hsl(var(--muted));
  }

  .ProseMirror .selectedCell:after {
    z-index: 2;
    position: absolute;
    content: "";
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    background: hsl(var(--primary) / 0.1);
    pointer-events: none;
  }

  /* Blockquotes */
  .ProseMirror blockquote {
    padding-left: 1rem;
    border-left: 4px solid hsl(var(--primary) / 0.4);
    background-color: hsl(var(--muted) / 0.4);
    margin: 1rem 0;
    padding: 0.5rem 1rem;
    border-radius: calc(var(--radius) - 2px);
  }

  /* Links */
  .ProseMirror a {
    color: hsl(var(--primary));
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .ProseMirror a:hover {
    color: hsl(var(--primary) / 0.8);
  }

  /* Highlights */
  .ProseMirror mark {
    background-color: hsl(var(--warning) / 0.2);
    color: hsl(var(--foreground));
    padding: 0 0.25rem;
    border-radius: calc(var(--radius) - 4px);
  }

  /* Code (inline) */
  .ProseMirror code {
    background-color: hsl(var(--muted));
    color: hsl(var(--foreground));
    padding: 0.125rem 0.25rem;
    border-radius: calc(var(--radius) - 4px);
    font-size: 0.875rem;
    font-family: "JetBrains Mono", "Fira Code", Consolas, "Courier New",
      monospace;
  }

  /* Lists */
  .ProseMirror ul,
  .ProseMirror ol {
    padding-left: 1.5rem;
  }

  .ProseMirror li {
    margin: 0.25rem 0;
  }

  /* Headings */
  .ProseMirror h1,
  .ProseMirror h2,
  .ProseMirror h3,
  .ProseMirror h4,
  .ProseMirror h5,
  .ProseMirror h6 {
    line-height: 1.3;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .ProseMirror h1 {
    font-size: 1.875rem;
    font-weight: 700;
    border-bottom: 2px solid hsl(var(--border-light));
    padding-bottom: 0.5rem;
  }

  .dark .ProseMirror h1 {
    border-bottom-color: hsl(var(--border-dark));
  }

  .ProseMirror h2 {
    font-size: 1.5rem;
    font-weight: 600;
    border-bottom: 1px solid hsl(var(--border-light));
    padding-bottom: 0.25rem;
  }

  .dark .ProseMirror h2 {
    border-bottom-color: hsl(var(--border-dark));
  }

  .ProseMirror h3 {
    font-size: 1.25rem;
    font-weight: 600;
  }

  .ProseMirror h4 {
    font-size: 1.125rem;
    font-weight: 600;
  }

  .ProseMirror h5 {
    font-size: 1rem;
    font-weight: 600;
  }

  .ProseMirror h6 {
    font-size: 0.875rem;
    font-weight: 600;
  }

  /* Paragraphs */
  .ProseMirror p {
    margin: 0.75rem 0;
    line-height: 1.7;
  }

  /* Horizontal rules */
  .ProseMirror hr {
    border: none;
    border-top: 2px solid hsl(var(--border-light));
    margin: 2rem 0;
  }

  .dark .ProseMirror hr {
    border-top-color: hsl(var(--border-dark));
  }

  /* Focus styles for editor */
  .ProseMirror:focus {
    outline: none;
  }

  /* Placeholder styles */
  .ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: hsl(var(--muted-foreground));
    pointer-events: none;
    height: 0;
  }
}

/*======= UTILITIES =======*/
.scrollbar-hide {
  -ms-overflow-style: none; /* IE & Edge */
  scrollbar-width: none; /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/*======= OVERWRITE =======*/
.animation-paused-on-hover:hover {
  animation-play-state: paused;
}

button.button.add-data-button {
  display: none;
}

div.mapboxgl-popup-content {
  background-color: var(--color-background-primary);
}

div.mapboxgl-popup-anchor-bottom div.mapboxgl-popup-tip {
  border-top-color: var(--color-background-primary);
}
